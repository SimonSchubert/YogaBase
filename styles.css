/* body {
    font-family: Arial, sans-serif;
    background-color: #ffffff;
    margin: 0;
    padding: 0;
    color: #333;
} */

/* General body styles NOT affecting session-fullscreen */
body:not(.session-fullscreen-active) {
    font-family: 'Roboto', sans-serif; /* Material Design default font */
    background-color: #fcfcff; /* Material 3 surface color */
    margin: 0;
    padding: 0;
    color: #1f1f1f; /* Material 3 On Surface color */
}


/* header {
    text-align: center;
    padding: 20px 16px 20px;
} */

/* Header styles */
body > header.mdc-card {
    margin: 16px;
    padding: 16px;
    background-color: #fffbff; /* Material 3 Surface Container Low */
    border-radius: 12px; /* Material 3 medium corner radius */
    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15); /* M3 Elevation 1 */
}

body > header.mdc-card .mdc-typography--headline4 {
    color: #1d1b20; /* M3 On Surface */
    margin-bottom: 8px;
}

body > header.mdc-card .tagline.mdc-typography--body1 {
    color: #49454f; /* M3 On Surface Variant */
}

/* Main content area NOT affecting session-fullscreen */
body > main:not(.session-fullscreen-active) {
    padding: 0 16px;
}

#filter {
    text-align: center;
    margin: 20px 0;
}

#filter label {
    font-size: 1.2em;
    margin-right: 10px;
}

#filter select,
#filter input {
    padding: 5px;
    font-size: 1em;
    margin-right: 10px;
}

/* .grid-container {
    -webkit-column-width: 300px;
    -moz-column-width: 300px;
    column-width: 300px;
    -webkit-column-gap: 10px;
    -moz-column-gap: 10px;
    column-gap: 20px;
    margin: 12px;
} */

/* New grid container styles */
.grid-container:not(.session-fullscreen-active *) {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 16px; /* Material 3 recommended gap */
    padding: 16px 0;
}

/* .category-card {
    padding: 8px;
    width: 100%;
    box-sizing: border-box;
    margin: 0;
    -webkit-column-break-inside: avoid;
    page-break-inside: avoid;
    break-inside: avoid-column;
    display: inline-grid;
    margin-bottom: 20px;
    border-radius: 16px;
    border: 1px solid #F3F4F6;
    background: #FFF;
    box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10), 0px 4px 6px 0px rgba(0, 0, 0, 0.10);
}

.category-card:hover,
.category-card:focus {
    cursor: pointer;
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
    outline: 2px solid #4CAF50;
    /* Focus outline for category cards */
/*    outline-offset: 2px;
} */

/* .category-card h3 {
    margin: 0 0 10px 0;
    color: #4CAF50;
    font-size: 1.4em;
    text-align: center;
} */

/* .category-description {
    margin-bottom: 15px;
    color: #666;
    font-size: 0.9em;
    line-height: 1.4;
    flex-grow: 1;
    max-height: 80px;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
} */

/* .category-poses-preview {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    justify-content: center;
    margin-top: 10px;
} */

/* .category-pose-thumbnail {
    width: 50px;
    height: 50px;
    object-fit: contain;
    background-color: #f9f9f9;
    border-radius: 4px;
    border: 1px solid #eee;
} */

/* .category-stats {
    font-size: 0.8em;
    color: #888;
    text-align: center;
    margin-top: 10px;
    font-style: italic;
} */


/* Card styles for categories and poses */
/* :not(.session-fullscreen-active *) ensures these styles don't apply if cards are somehow used in session view */
.mdc-card.category-card:not(.session-fullscreen-active *),
.mdc-card.pose-card:not(.session-fullscreen-active *) {
    /* background-color: #fffbff; M3 Surface Container Low - already applied by mdc-card? */
    border-radius: 12px; /* M3 medium corner radius */
    /* box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15); M3 Elevation 1 - mdc-card--outlined handles border */
    transition: box-shadow 0.2s ease-in-out, transform 0.2s ease-in-out;
}

.mdc-card.category-card:not(.session-fullscreen-active *):hover,
.mdc-card.pose-card:not(.session-fullscreen-active *):hover {
    box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.3), 0px 4px 6px 2px rgba(0, 0, 0, 0.15); /* M3 Elevation 2 on hover */
    transform: translateY(-2px);
}

/* Styles for content within category cards */
.mdc-card.category-card .mdc-card__primary-action:not(.session-fullscreen-active *) {
    padding: 16px;
    text-decoration: none; /* Remove underline from clickable area */
    color: inherit; /* Inherit text color */
}

.mdc-card.category-card .mdc-typography--headline6:not(.session-fullscreen-active *) { /* Category Title */
    margin-bottom: 8px;
    color: #1d1b20; /* M3 On Surface */
}

.mdc-card.category-card .category-description.mdc-typography--body2:not(.session-fullscreen-active *) { /* Category Description */
    color: #49454f; /* M3 On Surface Variant */
    min-height: 50px; /* Ensure some space even if description is short */
    /* Text overflow handling (already present, seems fine) */
    max-height: 80px;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
}

.category-poses-preview:not(.session-fullscreen-active *) {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: flex-start; /* Align thumbnails to the start */
    margin-top: 12px;
    margin-bottom: 12px;
}

.category-pose-thumbnail:not(.session-fullscreen-active *) {
    width: 40px; /* Slightly smaller thumbnails */
    height: 40px;
    object-fit: contain;
    background-color: #f0f0f0; /* Lighter background */
    border-radius: 8px; /* M3 small corner radius */
    border: 1px solid #e0e0e0;
}

.category-stats:not(.session-fullscreen-active *) {
    font-size: 0.875rem; /* M3 Label Medium */
    color: #49454f; /* M3 On Surface Variant */
    text-align: left; /* Align with title */
    margin-top: 8px;
}

/* .pose-card {
    background-color: white;
    padding: 8px;
    width: 100%;
    box-sizing: border-box;
    margin: 0;
    -webkit-column-break-inside: avoid;
    page-break-inside: avoid;
    break-inside: avoid-column;
    display: inline-grid;
    margin-bottom: 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
} */

/* .pose-card img {
    width: 100%;
    height: auto;
    border-radius: 5px;
} */

/* .pose-card h2 {
    margin-top: 10px;
    font-size: 1.5em;
} */

/* .pose-card p {
    margin: 10px 0;
} */

/* Styles for content within pose cards */
.mdc-card.pose-card .mdc-card__media:not(.session-fullscreen-active *) {
    background-color: #eaddf7; /* M3 Secondary Container (example if image is transparent) */
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
}

.mdc-card.pose-card .mdc-card__media img:not(.session-fullscreen-active *) {
    display: block;
    width: 100%;
    object-fit: cover; /* Ensure image covers the area */
    border-top-left-radius: 12px; /* Match card radius */
    border-top-right-radius: 12px; /* Match card radius */
}

.mdc-card.pose-card .mdc-card__primary:not(.session-fullscreen-active *) {
    padding: 16px;
}

.mdc-card.pose-card .mdc-typography--headline6:not(.session-fullscreen-active *) { /* Pose Name */
    margin-bottom: 8px;
    color: #1d1b20; /* M3 On Surface */
}

.mdc-card.pose-card .mdc-typography--body2:not(.session-fullscreen-active *) { /* Pose Benefits */
    color: #49454f; /* M3 On Surface Variant */
    line-height: 1.5;
}

/* Old h1, tagline have been effectively replaced by new header styles */
/* h1 {
    text-align: left;
} */

/* .tagline {
    text-align: left;
} */

/* Section title styling is handled by the new .section-title:not(...) rule */

/* #exercise-container is part of the old structure, session UI is now .session-fullscreen */
/* #exercise-container {
    display: none;
    flex-direction: column;
    align-items: center;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    margin: 20px;
    padding: 20px;
} */

/* #difficulty-selector is part of .session-fullscreen now, styled there */
/* #difficulty-selector {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    margin: 10px 0;
}

.difficulty-btn {
    padding: 8px 16px;
    border: 2px solid #ddd;
    background: white;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s;
}

.difficulty-btn:hover {
    background-color: #d0d0d0;
} */

/* .difficulty-btn.selected {
    background: #4CAF50;
    color: white;
    border-color: #4CAF50;
} */

/* .timer-container, .timer, .current-pose, .control-buttons, .control-btn, .back-btn,
   .progress-bar, .progress, .all-poses-preview, .mini-pose, #exercise-stats,
   .voice-icon, .voice_toggle-btn and its child/hover states are all part of .session-fullscreen now and styled there. */

/* The .difficulty-badge styles are used in both contexts (main page cards and session UI).
   We'll keep the original definition and ensure it's not overridden or make specific M3 adjustments if needed.
   For now, the existing .difficulty-badge styles will be kept. */
.difficulty-badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 10px;
    width: fit-content;
}

.difficulty-beginner {
    background-color: #DCFCE7;
    /* Green */
    color: #16A34A;
}

.difficulty-intermediate {
    background-color: #FEF9C3;
    /* Orange */
    color: #CA8A04;
}

.difficulty-advanced {
    background-color: #FEE2E2;
    /* Red */
    color: #DC2626;
}

/* Full-screen session UI styles */
.session-fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #fffbff; /* M3 Surface */
    z-index: 1000;
    display: none; /* Hidden by default, JS handles display */
    flex-direction: column;
    padding: 20px;
    box-sizing: border-box;
    overflow-y: auto;
    font-family: 'Roboto', sans-serif; /* Ensure M3 font in session too */
    color: #1f1f1f; /* M3 On Surface color */
}

.session-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.session-back-btn {
    background-color: transparent;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    color: #49454f; /* M3 On Surface Variant */
    padding: 8px; /* Make clickable area larger */
    border-radius: 50%;
}

.session-back-btn:hover {
    /* color: #4CAF50; */
    background-color: rgba(0,0,0,0.05); /* Subtle hover */
}
.session-back-btn svg {
    stroke: #49454f; /* M3 On Surface Variant */
}


.session-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start; /* Content aligns to top */
    max-width: 800px;
    margin: 0 auto;
    width: 100%;
    gap: 16px; /* Consistent gap */
}

.session-fullscreen #exercise-title {
    font-size: 1.75rem; /* M3 Title Large */
    font-weight: 500;
    color: #1d1b20; /* M3 On Surface */
    text-align: center;
}
.session-fullscreen #exercise-description {
    font-size: 1rem; /* M3 Body Large */
    color: #49454f; /* M3 On Surface Variant */
    text-align: center;
    margin-bottom: 16px;
}

.session-fullscreen #difficulty-selector {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
    margin: 10px 0;
}

.session-fullscreen .difficulty-btn {
    padding: 10px 24px; /* M3 Button style */
    border: 1px solid #79747e; /* M3 Outlined Button Outline */
    background: transparent;
    color: #6750a4; /* M3 Primary */
    border-radius: 20px; /* Full pill shape */
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s, border-color 0.2s;
    font-size: 0.875rem; /* M3 Label Large */
    font-weight: 500;
}

.session-fullscreen .difficulty-btn:hover {
    background-color: rgba(103, 80, 164, 0.08); /* M3 Primary Hover State Layer */
}

.session-fullscreen .difficulty-btn.selected {
    background: #6750a4; /* M3 Primary */
    color: #ffffff; /* M3 On Primary */
    border-color: #6750a4; /* M3 Primary */
}
.session-fullscreen .difficulty-btn:focus {
    outline: 2px solid #6750a4;
    outline-offset: 2px;
}

.session-fullscreen .progress-bar {
    width: 100%;
    height: 8px; /* Slightly thicker */
    background-color: #e7e0ec; /* M3 Surface Variant / Secondary Container */
    border-radius: 4px;
    overflow: hidden;
    margin: 10px 0;
}

.session-fullscreen .progress {
    height: 100%;
    background-color: #6750a4; /* M3 Primary */
    width: 0;
    transition: width 0.5s;
    border-radius: 4px;
}

.session-fullscreen #exercise-stats {
    text-align: center;
    font-weight: 500;
    font-size: 1rem; /* M3 Body Large */
    color: #49454f; /* M3 On Surface Variant */
}

.session-fullscreen .all-poses-preview {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px; /* Consistent gap */
    width: 100%;
    margin: 10px 0;
}

.session-fullscreen .mini-pose {
    height: 48px; /* Slightly larger */
    width: 48px;
    object-fit: contain;
    border-radius: 8px; /* M3 small corner radius */
    opacity: 0.7;
    transition: opacity 0.3s, border 0.3s;
    border: 2px solid transparent;
}

.session-fullscreen .mini-pose.active {
    opacity: 1;
    border: 2px solid #6750a4; /* M3 Primary */
}


.session-fullscreen .current-pose {
    /* display: flex; */ /* JS will handle display:block when exercise starts */
    flex-direction: column;
    align-items: center;
    margin: 10px 0;
    margin-top: auto; /* Pushes to bottom if content is short */
    text-align: center;
    width: 100%;
    display: none; /* Hide initially, will be shown on start */
}

.session-fullscreen .current-pose img {
    max-height: 35vh; /* Adjust as needed */
    width: auto;
    max-width: 100%;
    border-radius: 12px; /* M3 Medium corner radius */
    margin-bottom: 16px;
    background-color: #f0f0f0; /* Placeholder if image is transparent */
}
.session-fullscreen #current-pose-name {
    font-size: 1.5rem; /* M3 Title Medium */
    font-weight: 500;
    color: #1d1b20;
    margin-bottom: 8px;
}


.session-fullscreen .timer-container {
    margin: 10px 0;
    text-align: center;
}

.session-fullscreen .timer {
    font-size: 3rem; /* M3 Display Small approx */
    font-weight: 400;
    color: #6750a4; /* M3 Primary */
    margin-bottom: 4px;
}
.session-fullscreen #timer-label {
    font-size: 1rem; /* M3 Body Large */
    color: #49454f; /* M3 On Surface Variant */
}

.session-fullscreen .control-buttons {
    display: flex;
    gap: 16px; /* Consistent gap */
    margin: 10px 0;
    margin-bottom: auto; /* Pushes to top if content is short */
}

.session-fullscreen .control-btn { /* General style for Start/Pause buttons */
    padding: 12px 24px;
    border: none;
    border-radius: 24px; /* Full pill shape */
    cursor: pointer;
    font-size: 1rem; /* M3 Label Large */
    font-weight: 500;
    transition: background-color 0.2s, box-shadow 0.2s;
}
.session-fullscreen .control-btn#start-btn {
    background-color: #6750a4; /* M3 Primary */
    color: #ffffff; /* M3 On Primary */
}
.session-fullscreen .control-btn#start-btn:hover {
    background-color: #5a4293; /* Darker shade of primary */
    box-shadow: 0px 1px 3px rgba(0,0,0,0.2);
}
.session-fullscreen .control-btn#pause-btn {
    background-color: #ffd8e4; /* M3 Tertiary Container */
    color: #370b1e; /* M3 On Tertiary Container */
}
.session-fullscreen .control-btn#pause-btn:hover {
    background-color: #f3c0cf;
    box-shadow: 0px 1px 3px rgba(0,0,0,0.2);
}

.session-fullscreen .voice-toggle-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px; /* Clickable area */
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
}
.session-fullscreen .voice-toggle-btn:hover {
    background-color: rgba(0,0,0,0.05);
}
.session-fullscreen .voice-toggle-btn svg {
    width: 28px; /* Slightly larger icons */
    height: 28px;
    stroke: #49454f; /* M3 On Surface Variant */
}
.session-fullscreen .voice-toggle-btn:focus {
    outline: 2px solid #6750a4;
    outline-offset: 2px;
}


.github-link {
    position: fixed;
    top: 16px; /* Consistent with header margin */
    right: 16px; /* Consistent with header margin */
    z-index: 1001; /* Ensure it's above other elements, like header */
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #fffbff; /* Material 3 Surface Container Low */
    padding: 8px;
    border-radius: 50%;
    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15); /* M3 Elevation 1 */
    transition: transform 0.2s, box-shadow 0.2s;
}

.github-link:hover {
    transform: scale(1.05);
    box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.3), 0px 4px 6px 2px rgba(0, 0, 0, 0.15); /* M3 Elevation 2 */
}

.github-link svg {
    width: 24px;
    height: 24px;
    fill: #1d1b20; /* M3 On Surface */
}

/* Media queries for main page responsiveness */
@media (max-width: 768px) {
    body > header.mdc-card {
        margin: 12px;
        padding: 12px;
    }
    .grid-container:not(.session-fullscreen-active *) {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Adjust for smaller screens */
        gap: 12px;
    }
    .mdc-card.category-card .mdc-card__primary-action:not(.session-fullscreen-active *),
    .mdc-card.pose-card .mdc-card__primary:not(.session-fullscreen-active *) {
        padding: 12px;
    }
}

@media (max-width: 480px) {
    body:not(.session-fullscreen-active) {
        padding: 4px; /* Reduce padding on very small screens */
    }
    body > header.mdc-card {
        margin: 8px;
        padding: 8px;
    }
    body > header.mdc-card .mdc-typography--headline4 {
        font-size: 1.75rem; /* Adjust title size for mobile */
    }
    .grid-container:not(.session-fullscreen-active *) {
        grid-template-columns: 1fr; /* Single column on very small screens */
        gap: 10px;
    }
    .section-title:not(.session-fullscreen-active *) {
        font-size: 1.5rem;
        margin: 16px 0 12px 0;
    }
}


/* Media queries for session-fullscreen (mostly preserved, minor M3 tweaks if any) */
@media (max-width: 600px) {
    .session-fullscreen .session-content {
        padding: 10px 5px; /* Original padding */
    }

    .session-fullscreen .current-pose img {
        max-height: 30vh; /* Adjusted from 25vh for a bit more space */
    }

    .session-fullscreen .timer {
        font-size: 2.5rem; /* Adjusted from 2rem */
    }

    .session-fullscreen #exercise-title { /* This is within .session-fullscreen */
        font-size: 1.5rem; /* Original size */
    }

    .session-fullscreen .mini-pose {
        height: 40px; /* Original size */
        width: 40px;
    }
    .session-fullscreen .control-btn {
        padding: 10px 20px; /* Adjust button padding */
    }
}

/* General link styling for main page content */
a:not(.session-fullscreen-active *):not(.mdc-button):not(.mdc-icon-button):not(.github-link) {
    color: #6750a4; /* M3 Primary */
    text-decoration: none;
}

a:not(.session-fullscreen-active *):not(.mdc-button):not(.mdc-icon-button):not(.github-link):hover {
    text-decoration: underline;
    color: #5a4293; /* Darker M3 Primary */
}

/* Footer styles */
footer:not(.session-fullscreen-active *) {
    background-color: #f8f9fa; /* Light grey, common for footers */
    color: #6c757d; /* Muted text color */
    padding: 20px 16px;
    text-align: center;
    font-size: 0.875rem; /* M3 Label Medium */
    margin-top: 32px;
    border-top: 1px solid #e0e0e0;
}
footer a { /* Scoped to footer, so does not need :not */
    color: #6750a4; /* M3 Primary for links */
    text-decoration: none;
}
footer a:hover {
    color: #5a4293; /* Darker primary */
    text-decoration: underline;
}
footer .project {
    display: inline-flex; /* Align icon and text */
    align-items: center;
    margin: 0 8px;
}
footer .project img {
    margin-right: 4px;
}

/* Ensure no default browser margins on body or html */
html {
    margin: 0;
    padding: 0;
}

/* Old filter styles - commented out */
/* #filter {
    text-align: center;
    margin: 20px 0;
}

#filter label {
    font-size: 1.2em;
    margin-right: 10px;
}

#filter select,
#filter input {
    padding: 5px;
    font-size: 1em;
    margin-right: 10px;
} */


/* Old back button (now .session-back-btn) */
/* .back-btn { ... } */
/* .back-btn:hover { ... } */

/* Voice icon (now part of .voice-toggle-btn svg) */
/* .voice-icon { ... } */